/*!
  * WhatsApp Widget v1.2.0 (c) 2020 - Fajar Setya Budi
  * Contributors (https://github.com/agraris/whatsapp-widget/graphs/contributors)
  * Licensed under MIT (https://github.com/agraris/whatsapp-widget/blob/master/LICENSE)
  * WhatsApp Widget does not affiliate with WhatsApp Inc. in any way.
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).WhatsAppWidget=t()}(this,(function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function i(e){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?n(Object(a),!0).forEach((function(n){t(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var a='[data-toggle="'.concat("wa-chat",'"]'),r='[data-toggle="'.concat("wa-send",'"]'),s={name:"",division:"",photo:"",introduction:""},o={name:"string",division:"string",photo:"string",introduction:"string"},c=[{data:"name",type:"text",required:!0},{data:"message",type:"text",required:!0}],l={data:"string",type:"string",required:"boolean"},d={},u=function(){function t(e,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d[e.id]||(this._element=e,this._config=this._getConfig(n),this._inputs=this._getInput(i),this._phoneNumber=this._element.getAttribute("action"),this._isShown=!1,this._toggleChat="",this._contentElement="",this._toggleSend="",this._buildHTML(),this._setEventListener(),d[e.id]=this)}var n,u,h;return n=t,(u=[{key:"toggle",value:function(){var e=this;Object.keys(d).forEach((function(t){t!==e._element.id&&d[t]._isShown&&d[t].toggle()})),this._isShown?this._hide():this._show()}},{key:"_sendMessage",value:function(){if(!/^\d+$/.test(this._phoneNumber))throw new Error("Phone number ("+this._phoneNumber+") is invalid.");for(var e=this._element.querySelectorAll("[data-message]"),t="https://wa.me/"+this._phoneNumber+"?text=",n=!0,i=0;i<e.length;i++){var a=e[i];this._formValidation(a)||(n=!1);var r=a.getAttribute("data-message");t+=r.replace(/^./,r[0].toUpperCase())+": "+a.value+"%0A"}n&&window.open(t,"_blank")}},{key:"_buildHTML",value:function(){if(this._element.innerHTML)return!1;this._verifyInput(this._inputs);var e=document.createElement("a"),t="#"+this._element.id;e.href=t,e.classList.add("wa-widget-toggle"),e.setAttribute("data-toggle","wa-chat"),e.setAttribute("data-target",t),e.innerHTML='<svg viewBox="0 0 90 90" fill="rgb(79, 206, 93)" width="32" height="32">\n            <path d="M90,43.841c0,24.213-19.779,43.841-44.182,43.841c-7.747,0-15.025-1.98-21.357-5.455L0,90l7.975-23.522   c-4.023-6.606-6.34-14.354-6.34-22.637C1.635,19.628,21.416,0,45.818,0C70.223,0,90,19.628,90,43.841z M45.818,6.982   c-20.484,0-37.146,16.535-37.146,36.859c0,8.065,2.629,15.534,7.076,21.61L11.107,79.14l14.275-4.537   c5.865,3.851,12.891,6.097,20.437,6.097c20.481,0,37.146-16.533,37.146-36.857S66.301,6.982,45.818,6.982z M68.129,53.938   c-0.273-0.447-0.994-0.717-2.076-1.254c-1.084-0.537-6.41-3.138-7.4-3.495c-0.993-0.358-1.717-0.538-2.438,0.537   c-0.721,1.076-2.797,3.495-3.43,4.212c-0.632,0.719-1.263,0.809-2.347,0.271c-1.082-0.537-4.571-1.673-8.708-5.333   c-3.219-2.848-5.393-6.364-6.025-7.441c-0.631-1.075-0.066-1.656,0.475-2.191c0.488-0.482,1.084-1.255,1.625-1.882   c0.543-0.628,0.723-1.075,1.082-1.793c0.363-0.717,0.182-1.344-0.09-1.883c-0.27-0.537-2.438-5.825-3.34-7.977   c-0.902-2.15-1.803-1.792-2.436-1.792c-0.631,0-1.354-0.09-2.076-0.09c-0.722,0-1.896,0.269-2.889,1.344   c-0.992,1.076-3.789,3.676-3.789,8.963c0,5.288,3.879,10.397,4.422,11.113c0.541,0.716,7.49,11.92,18.5,16.223   C58.2,65.771,58.2,64.336,60.186,64.156c1.984-0.179,6.406-2.599,7.312-5.107C68.398,56.537,68.398,54.386,68.129,53.938z"></path>\n        </svg>';var n="".concat(e.outerHTML,'\n            <div class="').concat("wa-widget-content",' chat-tab">\n                <header class="chat-header">\n                    <div class="chat-admin-picture">\n                        <img src="').concat(this._config.photo,'" alt="').concat(this._config.name,'\'s Photos">\n                    </div>\n                    <div class="chat-admin-details">\n                        <h4>').concat(this._config.name,"</h4>\n                        <p><small>").concat(this._config.division,'</small></p>\n                    </div>\n                </header>\n                <div class="chat-content">\n                    <div class="chat-item">\n                        <p>').concat(this._config.introduction,"</p>\n                    </div>\n                </div>\n                ").concat(this._buildInputs(this._inputs).outerHTML,"\n            </div>");this._element.innerHTML=n}},{key:"_buildInputs",value:function(e){var t=document.createElement("div");t.classList.add("chat-form"),e.forEach((function(e){var n=document.createElement("input");n.type=e.type,n.setAttribute("data-message",e.data),n.placeholder=e.data.replace(/^./,e.data[0].toUpperCase()),n.required=e.required,t.appendChild(n)}));var n=document.createElement("button");return n.classList.add("chat-send"),n.type="submit",n.setAttribute("data-toggle","wa-send"),n.innerHTML="<strong>Send</strong>",t.appendChild(n),t}},{key:"_setEventListener",value:function(){var e=this;this._toggleChat=document.querySelector(a+'[data-target="#'+this._element.id+'"]'),this._contentElement=this._element.getElementsByClassName("wa-widget-content").item(0),this._toggleSend=this._element.querySelector(r),this._toggleChat&&this._toggleChat.addEventListener("click",(function(t){t.preventDefault(),e.toggle()})),this._toggleSend&&this._toggleSend.addEventListener("click",(function(t){t.preventDefault(),e._sendMessage()}))}},{key:"_show",value:function(){this._element.classList.add("expanded"),this._toggleChat.classList.add("expanded"),this._contentElement.classList.add("expanded"),this._isShown=!0}},{key:"_hide",value:function(){this._element.classList.remove("expanded"),this._toggleChat.classList.remove("expanded"),this._contentElement.classList.remove("expanded"),this._isShown=!1}},{key:"_formValidation",value:function(e){if(!e.required)return!0;switch(e.classList.remove("required"),e.type){case"email":if(!/^\S+@\S+$/.test(e.value))return e.classList.add("required"),!1;break;default:if(""==e.value||null==e.value)return e.classList.add("required"),!1}return!0}},{key:"_getConfig",value:function(e){return e=i(i({},s),e),this._typeCheck(e,o),e}},{key:"_getInput",value:function(e){return void 0===e||0===e.length?c:e}},{key:"_verifyInput",value:function(e){var t=this;e.forEach((function(e){t._typeCheck(e,l)}))}},{key:"_typeCheck",value:function(e,t){var n=this;Object.keys(t).forEach((function(i){var a=t[i],r=e[i],s=r&&n._isElement(r)?"element":n._toType(r);if(!new RegExp(a).test(s))throw new Error("WhatsApp Widget: "+'Option "'.concat(i,'" provided type "').concat(s,'" ')+'but expected type "'.concat(a,'".'))}))}},{key:"_isElement",value:function(e){(e[0]||e).nodeType}},{key:"_toType",value:function(e){return null==e?"".concat(e):{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()}}])&&e(n.prototype,u),h&&e(n,h),t}();return document.body.onload=function(){for(var e=document.querySelectorAll("[data-chat]"),t=0;t<e.length;t++){var n=e[t];new u(n,{},[])}},u}));